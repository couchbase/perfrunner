---
- hosts: kv:index:n1ql:analytics:eventing:fts
  tasks:
  - name: upgrading packages on the system
    yum: state=latest name=epel-release
  - name: installing additional packages
    yum: state=latest name={{item}}
    with_items:
      - atop
      - fio
      - gdb
      - hdparm
      - htop
      - iotop
      - iperf
      - kernel-devel
      - kernel-headers
      - java-1.8.0-openjdk
      - lsof
      - moreutils
      - net-tools
      - numactl
      - psmisc
      - rsync
      - sysstat
      - tree
      - vim
      - wget
      - perf
      - zip
  - name: disable thp
    shell: "echo never > /sys/kernel/mm/transparent_hugepage/enabled"
  - name: disable thp defrag
    shell: "echo never > /sys/kernel/mm/transparent_hugepage/defrag"